language: node_js

node_js:
  - '10'
  - '12'

before_install:
  - npm install -g npm@latest
  - npm --version

cache: npm

after_success:
  - npm run codecov
  - npm run coveralls

jobs:
  include:
    - stage: deploy
      node_js: 10
      script: bash scripts/deploy.sh
      skip_cleanup: true
      if: branch IN (master, develop)

notifications:
  email:
    on_success: change
    on_failure: always
